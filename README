ScaffoldingExtensions
=====================

The Scaffolding Extensions plugin enhances Rails' default scaffolding in the
following ways:

  * Choose which fields are displayed in the scaffold and in which order
  * Choose which methods are added by the scaffold function
  * Handle belongs_to associations with select boxes in the new/edit forms
  * Add HABTM association scaffolding using two select boxes
  * Add simple search scaffolding (using all fields from new/edit form)
  * Add scaffolding for merging records (combining two records into one by
    updating all associated tables)
  * Show associated data instead of foreign key integer in show/search results 
    scaffold
  * Set the css class of scaffolded tables per ActiveRecord class
  * Override the input widget type and widget options per attribute
  * Override the directory of the scaffolded forms per controller

General Usage
=============

Generally, the scaffolding extensions are used in same way as the normal
scaffolding.  Inside a controller, run the command:

  scaffold :album
  
In addition to the normal options, this plugin adds the following options to
the scaffold method:

  * :except => don't generate methods for certain actions
  * :only => only generate methods for given actions
  * :habtm => generate a has_and_belongs_to_many scaffold for the given classes

So these is are valid calls to scaffold:

  scaffold :album, :suffix=>true, :except=>:delete, :habtm=>[:artist]
  scaffold :artist, :only=>[:new, :edit, :search, :manage], :habtm=>:artist

Let's say you just do the simplest possible command (scaffold :album).  Then
you go to the index of the controller.  You'll notice some differences.  The
default Rails scaffold page has a paginated table of records.  This plugin
changes that to a simple management page with the following links:

  * Create album
  * Destroy album
  * Edit album
  * Merge albums
  * Search albums
  * Show album

Clicking on show, destroy, or edit links will bring up a simple select box
allowing you to choose a record to show, destroy, or edit.  Clicking on new
will bring you to a form that allows you to create a new object (similar to the
default form, with slightly different formatting).  Clicking on search will
bring up a simple search form for searching on any of the fields in the new or
edit form (the search results page looks similar to the default Rails index
page).  Clicking on merge will bring up a page with two select boxes, allowing
you to merge two records of the same type (by updating the necessary
associations and then deleting the record to be merged).

If you specified any actions in :except (or didn't include them in :only),
the appropriate links won't appear in the management page.  If you specified
:manage in :except, the management page won't be created.  The scaffold methods
that are available for use in :except and :only are:

  [:manage, :show, :destroy, :edit, :new, :search, :merge]
  
Let's say you used the command:

  scaffold :artist, :only=>[:new, :edit, :search, :manage], :habtm=>:artist

The manage page would look like:

  * Create album
  * Edit album
  * Search albums

If you click on the edit albums link and select an album, you'll notice a link
below the standard input form allowing you to associate the album to artists.
Clicking on that link will bring you to a page with two multiselect boxes,
allowing you to choose which artists will be associated with the album.

If you just want to create habtm scaffolds, there is a command that does so:

  scaffold_habtm(:artist, :album)

By default, this will create the habtm scaffold both ways. You can go to
edit_album_artists/42 to edit the artists for album 42 and
edit_artist_albums/42 to edit the albums for artist 42.

Customization
=============

An addition to the new scaffold features that this plugin adds (merge, search,
belongs_to, and habtm scaffolding), the major attraction of this plugin is the
ability to customize the scaffolding by adding some code to the model class.
Let's start with the most common customizations:

  class Album < ActiveRecord::Base
    has_and_belongs_to_many :artists
    belongs_to :genre
    @scaffold_fields = %w'name rating genre'
    @scaffold_select_order = 'name'
    def scaffold_name
      name[0...50]
    end
  end

The @scaffold_fields variable determines which fields are shown in the new,
edit, and search forms (and uses the order specified).  The
@scaffold_select_order determines which order is used in the select when
displaying a list of albums (for example, from the edit link of the management
page.  The scaffold_name method determines the name to use for each album
inside those select boxes.

Notice in this case that genre was specified.  In this case, our schema has 
genre_id as a foreign key to the genres table.  If you specified genre_id,
you'd get a usual text input box for the foreign key integer.  If you specify
genre (the name of the belongs_to association), instead of a text input box,
you will get a select box with all genres, allowing you to pick one.  It will
use the @scaffold_select_order variable and scaffold_name method in the genre 
model to format the select box.

There are also a couple of customizations that can be set in the controller:

  * @scaffold_template_dir => Allows you to choose a separate directory for the
    scaffolds (instead of the one that comes with this plugin)
  * @default_scaffold_methods => Allows you to change the methods scaffolded by
    default, instead of using :except or :only each time.

There are some other lessor used options which allow you to:

  * Set the css class of scaffolded tables per ActiveRecord class
  * Override the input widget type and widget options per attribute

Consult the RDoc if you would like more information on these.

Questions?
==========

Feel free to contact me at jeremyevans0@gmail.com if you have any questions
about this plugin.
